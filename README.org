* Welcome to Sensu
  Sensu is a monitoring system framework, handling the remote execution of checks.

* License
  Sensu is released under the MIT license.

* Contributing
  - [[http://help.github.com/fork-a-repo/][Fork]] [[https://github.com/sonian/sensu][Sensu]]
  - Use a [[https://github.com/dchelimsky/rspec/wiki/Topic-Branches][topic branch]]
  - Create a [[http://help.github.com/send-pull-requests/][pull request]]

  Keep it simple.

** Readme Driven Development
*** A Client Will
  - Have a set of attributes to describe it, including its responsibilities
  - Subscribe to a set of AMQP fanout exchanges determined by its responsibilities
  - Send keep alives to a server
  - Substitute tokens in a check command with its matching client attribute
  - Receive a check from a queue, execute it, and publish the result with its client name
  - Not allow overlapping check executions of the same name
  - Report when it is unaware of a check

*** A Server Will
  - Subscribe to a AMQP direct exhange, one queue for check scheduling/execution, one for check results
  - Populate a check scheduling queue from a JSON config file
  - Pull a check from the check scheduling queue and push it onto its associated fanout exchanges
  - Pull check results, storing the latest events for clients, a good result will flush a previous event for that client
  - Create an event when it stops receiving keep-alives from a client
  - Trigger a specific event handler, determined by the check type that produced the event, providing it with a JSON event file

*** An API Will
  - List all current events
  - List all clients and their attributes
  - Show a client and its attributes
  - Remove a client and resolve associated events

*** A Plugin Will
  - Output to STDOUT
  - Return a valid exit status code

*** A Handler Will
  - Accept command line argument for an event file path (-f)
  - Parse the JSON event file
  - Handle the event as it wishes

** Local Setup
*** Configure RabbitMQ
  user

  : rabbitmqctl add_user sensu password

  vhost

  : rabbitmqctl add_vhost /sensu

  permissions

  : rabbitmqctl set_permissions -p /sensu sensu ".*" ".*" ".*"

  /usr/local/etc/rabbitmq/rabbitmq.config

  substitute **PATH** with your sensu project path

  : [
  :   {rabbit, [
  :     {ssl_listeners, [5671]},
  :     {ssl_options, [{cacertfile,"*PATH*/certs/testca/cacert.pem"},
  :                    {certfile,"*PATH*/certs/server/cert.pem"},
  :                    {keyfile,"*PATH*/certs/server/key.pem"},
  :                    {verify,verify_peer},
  :                    {fail_if_no_peer_cert,true}]}
  :   ]}
  : ].
